<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>D3 Test</title>
    <script src="./d3.js" charset="utf-8"></script>
    <script src="./topojson.js" charset="utf-8"></script>
</head>
<style>
    .tooltip {
        position: absolute;
        width: auto;
        height: auto;
        padding: 4px;
        font: 10px sans-serif;
        color: #fff;
        background: #333;
        -webkit-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        -moz-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        border-radius: 4px;
        visibility: hidden;
        text-align: center;
    }
</style>

<body>
    <script type="text/javascript">
        var colorScale = d3.scaleOrdinal(d3.schemeSet1);
        var width = 1920;
        var height = 2000;
        var scale = 50000;
        var svg = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height);

        let projection = d3.geoMercator()
            .center([139, 35])
            .translate([width / 2, height / 2])
            .scale(scale);
        let geoGenerator = d3.geoPath().projection(projection);

        let toukaido = d3.json("../data/JR東/東日本旅客鉄道東海道線.geojson");
        let japan = d3.json("./japan.topojson");
        let toukaido_tokai = d3.json("../data/JR東海/東海旅客鉄道東海道線.geojson")
        let gotenba = d3.json("../data/JR東海/東海旅客鉄道御殿場線.geojson")

        Promise.all([toukaido, japan, toukaido_tokai, gotenba]).then(function (values) {
            var tokaido = values[0];
            var japangeo = topojson.feature(values[1], values[1].objects.japan);
            var tokaido_tokai = values[2];
            var gotenba_tokai = values[3];
            svg.selectAll("path")
                .data(japangeo.features)
                .enter()
                .append("path")
                .attr("d", geoGenerator)
                .attr("stroke", "black")
                .attr("stroke-width", 1)
                .attr("fill", "#646464");
            svg.selectAll('path2')
                .data(tokaido.features)
                .enter()
                .append("path")
                .attr("d", geoGenerator)
                .attr("stroke", "green")
                .attr("fill", "none")
                .attr("class", (d) => { return d.properties.name})
                .attr("stroke-width", 1);
            svg.selectAll("path2")
                .data(gotenba_tokai.features)
                .enter()
                .append("path")
                .attr("d", geoGenerator)
                .attr("stroke", "orange")
                .attr("stroke-width", 1)
                .attr("fill", "none");
            svg.selectAll("path2")
                .data(tokaido_tokai.features)
                .enter()
                .append("path")
                .attr("d", geoGenerator)
                .attr("stroke", "orange")
                .attr("stroke-width", 1)
                .attr("fill", "none");

        })

    </script>
</body>

</html>